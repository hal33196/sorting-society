/* ================================
   Sorting Society — Dystopian UI
   ================================ */

:root{
  --text:#14161a;
  --muted:#5b6472;
  --border:#e6e9f0;

  /* default world theme (overridden by body classes) */
  --bg:#f3f5fa;
  --card:#ffffff;
  --shadow:0 12px 34px rgba(20,22,26,.14);

  --accent:#2f6fed;
  --accent2:#1f55c5;
  --tint:rgba(47,111,237,.10);
}

*{ box-sizing:border-box }

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:var(--bg);
  transition: background .25s ease, color .25s ease;
}

/* subtle grain / dystopian texture */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  opacity:.06;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(0,0,0,.20) 1px, transparent 1px),
    radial-gradient(circle at 80% 0%, rgba(0,0,0,.16) 1px, transparent 1px),
    radial-gradient(circle at 30% 90%, rgba(0,0,0,.18) 1px, transparent 1px);
  background-size: 120px 120px, 160px 160px, 200px 200px;
  mix-blend-mode:multiply;
}

.app{max-width:860px;margin:0 auto;padding:28px 16px 40px}
.header h1{margin:0 0 6px;font-size:34px;letter-spacing:-0.02em}
.sub{margin:0 0 18px;color:var(--muted)}

.card{
  background:var(--card);
  border:1px solid rgba(17,24,39,.12);
  border-radius:16px;
  padding:18px 18px 16px;
  box-shadow:var(--shadow);
}
.card + .card{margin-top:14px}
.hidden{display:none}

.meta{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
.progress{flex:1;height:10px;background:rgba(17,24,39,.10);border-radius:999px;overflow:hidden}
.bar{height:100%;background:var(--accent);border-radius:999px}
.count{min-width:140px;text-align:right;color:var(--muted);font-size:14px}

.qtext{margin:0 0 14px;font-size:22px;line-height:1.25}
.answers{display:grid;gap:10px}

.answerBtn{
  width:100%;
  text-align:left;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(17,24,39,.12);
  background:#fff;
  cursor:pointer;
  font-size:16px;
  line-height:1.25;
  transition:border-color .12s ease, box-shadow .12s ease, transform .06s ease;
}
.answerBtn:hover{
  border-color: rgba(17,24,39,.20);
  box-shadow:0 10px 22px var(--tint);
  transform: translateY(-1px);
}
.answerBtn.selected{
  border-color: rgba(17,24,39,.24);
  box-shadow:0 0 0 4px var(--tint);
  background:var(--tint);
}

.nav{display:flex;gap:10px;justify-content:flex-end;margin-top:14px;flex-wrap:wrap}
button{border:0;border-radius:12px;padding:10px 14px;font-size:15px;cursor:pointer}
button:disabled{opacity:.5;cursor:not-allowed}

.primary{
  color:white;
  background:linear-gradient(180deg,var(--accent),var(--accent2));
  box-shadow:0 16px 30px rgba(17,24,39,.18);
}
.ghost{background:rgba(238,242,255,.9);color:#21305a}

.resultGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0 12px}
@media (max-width:620px){.resultGrid{grid-template-columns:1fr}}

.pill{
  border:1px solid rgba(17,24,39,.12);
  border-radius:14px;
  padding:10px 12px;
  background:#fff
}
.pillLabel{font-size:12px;color:var(--muted)}
.pillValue{font-size:18px;font-weight:650;margin-top:2px}

.resultCard{
  border:1px solid rgba(17,24,39,.12);
  border-radius:16px;
  padding:14px;
  background:#fff;
  position:relative;
  overflow:hidden;
  box-shadow:0 18px 40px rgba(20,22,26,.12);
}
.details{margin-top:12px}
.details summary{cursor:pointer;color:var(--accent2);font-weight:700;letter-spacing:.02em}
pre{
  white-space:pre-wrap;
  word-break:break-word;
  background:#0f172a;
  color:#e2e8f0;
  border-radius:12px;
  padding:12px;
  border:1px solid rgba(255,255,255,.08)
}
.footer{margin-top:16px;text-align:center;color:var(--muted)}
.fine{color:var(--muted);font-size:13px;margin-top:10px}

/* ================================
   Themes
   ================================ */

/* Default “world” */
body.theme-default{
  --bg:#f3f5fa;
  --card:#ffffff;
  --shadow:0 12px 34px rgba(20,22,26,.14);

  --accent:#2f6fed;
  --accent2:#1f55c5;
  --tint:rgba(47,111,237,.10);
}

/* Any classification theme slightly tightens tone */
body[class*="theme-"]{
  --bg:#f1f3f6;
  --shadow:0 16px 40px rgba(20,22,26,.18);
}

/* CLASS BASE THEMES */
body[class*="theme-upper-"]{
  --accent:#0b1220; --accent2:#111827; --tint:rgba(15,23,42,.16);
}
body[class*="theme-uppermid-"]{
  --accent:#1d4ed8; --accent2:#1e40af; --tint:rgba(29,78,216,.18);
}
body[class*="theme-middle-"]{
  --accent:#334155; --accent2:#0f172a; --tint:rgba(51,65,85,.18);
}
body[class*="theme-working-"]{
  --accent:#065f46; --accent2:#064e3b; --tint:rgba(6,95,70,.20);
}
body[class*="theme-poverty-"]{
  --accent:#b45309; --accent2:#92400e; --tint:rgba(180,83,9,.22);
}

/* POLICY MODIFIERS */
body[class*="-redistributive"]{ --accent2:#2563eb }
body[class*="-institution"]{ --accent2:#334155 }
body[class*="-mixed"]{ --accent2:#0f766e }
body[class*="-individual"]{ --accent2:#7c3aed }

/* Optional: result header tag */
body[class*="theme-"] #screenResult h2::after{
  content:" — CLASSIFICATION OUTPUT";
  font-size:12px;
  font-weight:800;
  letter-spacing:.12em;
  text-transform:uppercase;
  opacity:.70;
}

/* ================================
   Dystopian stamp
   ================================ */

#screenResult .resultCard::after{
  content:"CLASSIFICATION ASSIGNED";
  position:absolute;
  top:14px;
  right:-44px;
  transform:rotate(18deg);
  padding:8px 52px;
  border:2px solid rgba(17,24,39,.35);
  background:rgba(255,255,255,.55);
  color:rgba(17,24,39,.75);
  font-weight:900;
  letter-spacing:.14em;
  font-size:11px;
  text-transform:uppercase;
  mix-blend-mode:multiply;
}

/* ================================
   Scan overlay
   ================================ */

.scan{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(12,16,24,.55);
  backdrop-filter: blur(2px);
  z-index:9999;
}

.scanBox{
  width:min(520px, calc(100vw - 28px));
  background:rgba(255,255,255,.92);
  border:1px solid rgba(17,24,39,.18);
  border-radius:18px;
  padding:18px;
  box-shadow:0 24px 70px rgba(0,0,0,.25);
  position:relative;
  overflow:hidden;
}

.scanBox::before{
  content:"";
  position:absolute;
  inset:-40px;
  background:linear-gradient(90deg, transparent, rgba(47,111,237,.10), transparent);
  transform: translateX(-60%);
  animation: scanSweep 1.1s linear infinite;
}

@keyframes scanSweep{
  0%{ transform: translateX(-60%) }
  100%{ transform: translateX(60%) }
}

.scanTitle{
  font-weight:900;
  letter-spacing:.14em;
  font-size:12px;
  text-transform:uppercase;
  margin-bottom:8px;
}

.scanSub{
  font-size:14px;
  color:rgba(17,24,39,.75);
  margin-bottom:12px;
}

.scanBar{
  height:10px;
  border-radius:999px;
  overflow:hidden;
  background:rgba(17,24,39,.10);
}

.scanBarFill{
  height:100%;
  width:0%;
  background:linear-gradient(180deg,var(--accent),var(--accent2));
  border-radius:999px;
  transition: width .12s ease;
}

.scanFine{
  margin-top:10px;
  font-size:12px;
  color:rgba(17,24,39,.55);
  letter-spacing:.03em;
}
